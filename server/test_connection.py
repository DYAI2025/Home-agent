#!/usr/bin/env python3
\"\"\"\nTest script to verify the agent can connect to the local LiveKit server\n\"\"\"\n\nimport os\nfrom livekit import api\n\nasync def test_connection():\n    \"\"\"Test connection to the local LiveKit server\"\"\"\n    # Use the same environment variables as our agent\n    url = os.environ.get(\"LIVEKIT_URL\", \"http://localhost:7880\")  # Use HTTP for API, not WS\n    api_key = os.environ.get(\"LIVEKIT_API_KEY\", \"devkey\")\n    api_secret = os.environ.get(\"LIVEKIT_API_SECRET\", \"secret\")\n    \n    print(f\"Testing connection to LiveKit server at: {url}\")\n    \n    try:\n        # Create API client (use HTTP URL for API calls, not WebSocket)\n        client = api.LiveKitAPI(\n            url=url,\n            api_key=api_key,\n            api_secret=api_secret\n        )\n        \n        # Test by listing rooms (should be empty initially)\n        rooms = await client.room.list_rooms()\n        print(f\"✓ Successfully connected to LiveKit server\")\n        print(f\"  - Number of rooms: {len(rooms)}\")\n        \n        # Close the client\n        await client.aclose()\n        print(\"✓ Connection test completed successfully\")\n        \n    except Exception as e:\n        print(f\"✗ Failed to connect to LiveKit server: {e}\")\n        return False\n    \n    return True\n\n\nif __name__ == \"__main__\":\n    import asyncio\n    # Set the same environment variables as our agents\n    os.environ.setdefault(\"LIVEKIT_URL\", \"http://localhost:7880\")  # Use HTTP for API\n    os.environ.setdefault(\"LIVEKIT_API_KEY\", \"devkey\")\n    os.environ.setdefault(\"LIVEKIT_API_SECRET\", \"secret\")\n    \n    success = asyncio.run(test_connection())\n    if success:\n        print(\"\\nYou can now run your agent with:\")\n        print(\"  cd /home/dyai/Dokumente/DYAI_home/DEV/AI_LLM/Livekit_Agents/agents\")\n        print(\"  uv run python ../server/voice_agent.py dev\")\n    else:\n        print(\"\\nPlease start the LiveKit server first:\")\n        print(\"  cd /home/dyai/Dokumente/DYAI_home/DEV/AI_LLM/Livekit_Agents/server\")\n        print(\"  ./start_server_docker.sh\")\n